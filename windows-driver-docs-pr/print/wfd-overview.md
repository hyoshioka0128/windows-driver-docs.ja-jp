---
title: Wi-fi Direct 印刷の概要
description: Wi-fi Direct 印刷のサポートされているユーザーエクスペリエンスとユースケースについて説明します。
ms.assetid: 40ED3410-EC46-42C8-B09B-8010639F2268
ms.date: 06/09/2020
ms.localizationpriority: medium
ms.openlocfilehash: 5901d2857b858d3d1ae6daa35de47b3ceb97b12a
ms.sourcegitcommit: 88f6e7355de9e0714057020557dc8c7831e90e7b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/10/2020
ms.locfileid: "84638452"
---
# <a name="wi-fi-direct-printing-overview"></a>Wi-fi Direct 印刷の概要

## <a name="supported-user-experiences"></a>サポートされているユーザーエクスペリエンス

**Windows からの Wi-fi ダイレクトプリンターとのペアリング**

海外のパートナーとのミーティングでは、ビジネスエグゼクティブは契約のリビジョンを受け取り、会議の前に更新されたコピーを印刷する必要があります。

これらは、Wi-fi Direct をサポートするパートナーのオフィスで、Windows 認定の印刷デバイスを見つけます。 デバイスとその Windows 画面とのペアリングを開始し、デバイスへの接続をすばやく確立して印刷する準備ができました。 ドキュメントの複数のコピーを印刷し、新しい承認済みの契約をパートナーに提示することができます。

数時間後に、空港に向けて、署名付きのコントラクト。

次のシナリオについて説明します。

PIN を使用してペアリングする

- コントロールパネルでデバイスを選択すると、ユーザーは接続 PIN の入力を求められます。 これらは、受付によって提供される PIN 番号を入力します。 接続が完了し、印刷の準備ができました。

アドホック PIN を使用してペアリングする

- コントロールパネルでデバイスを選択すると、デバイスのコントロールパネルで、デバイスに入力する PIN (Bluetooth ペアリングと同様) を入力するように求められます。 デバイスのコントロールパネルに PIN を入力し、PC のプロンプトに同じ番号を入力します。 接続が完了し、印刷の準備ができました。

**以前にペアリングした Wi-fi ダイレクトプリンターに印刷する**

別のユーザーが自分のモバイルブロードバンド接続のみを使用して、自宅にいるときに Windows PC でインターネット接続を取得します。 これらのデバイスは Wi-fi Direct 印刷デバイスを所有しており、以前は Windows PC にペアリングされ、インストールされています。

自宅のドキュメントで作業しており、ハードコピーを印刷する必要があります。 アプリケーションで [印刷] を選択します。 Wi-fi Direct プリンターは、常に Wi-fi ダイレクトをブロードキャストし、現在は範囲内にあります。 [印刷] ダイアログが表示されたら、Wi-fi Direct プリンターが "オンライン" と表示されます。 デバイスを選択し、[印刷] をクリックします。 Windows PC によってデバイスへの接続が確立され、印刷ジョブが送信されます。 Wi-fi Direct プリンターは、ネットワーク経由で、または直接接続されている他のプリンターとして機能しているように見えます。 印刷ジョブが出力され、編集を続行できます。

## <a name="use-cases"></a>例

**プリンター-最初の時刻のペアリング**

モダンデバイスを介した WI-FI DIRECT 印刷デバイスへの手動接続コントロールパネル

Preconditions

- ユーザーは Wi-fi Direct 印刷デバイスの範囲内にある

- Wi-fi Direct 印刷デバイスのドライバーは、ユーザーのデバイスにあります。

- Wi-fi Direct 印刷デバイスが Windows 認定要件を満たしている

トリガー

Windows のスタート画面で [プリンターの追加] のユーザーの種類を選択し、[設定] を選択して、コントロールパネルの [デバイス] を起動します。

手順

1. デバイスコントロールパネルで使用可能な印刷デバイスを検索する

1. DAF が Wi-fi Direct (WFD) デバイスの L2 チャレンジを発行する

1. 利用可能な WFD 印刷デバイスが、デバイス一覧のユーザーのオプションとして表示される

1. ユーザーが WFD 印刷デバイスをクリックする

1. DAF は、WFD デバイスとの L2/L3 接続を確立し、WSD プロバイダーとの垂直方向のペアリングをトリガーします。 デバイス用のキューが作成され、ドライバーが構成されています。

1. WFD プロバイダーがデバイスから切断する

実行後の状態

- Wi-fi ダイレクトプリンターの印刷キューが確立されました

- WFD L2 ビーコンチャレンジが成功するたびに、印刷キューが "利用可能" と表示される

代替フロー

該当なし

考慮事項

該当なし

プリンターの追加ウィザードを使用した WI-FI DIRECT 印刷デバイスへの手動接続

Preconditions

- ユーザーは Wi-fi Direct 印刷デバイスの範囲内にある

- Wi-fi Direct 印刷デバイスのドライバーは、ユーザーのデバイスにあります。

- Wi-fi Direct 印刷デバイスが Windows 認定要件を満たしている

トリガー

ユーザーは、クラシックコントロールパネルを開き、デバイスとプリンターのコントロールパネルを起動します。

手順

1. デバイスとプリンターのコントロールパネルを起動するユーザー

1. ユーザーが [デバイスの追加] をクリックする

1. DAF が Wi-fi Direct (WFD) デバイスの L2 チャレンジを発行する

1. 利用可能な WFD 印刷デバイスが、デバイス一覧のユーザーのオプションとして表示される

1. ユーザーが WFD 印刷デバイスをクリックする

1. DAF は、WFD デバイスとの L2/L3 接続を確立し、WSD プロバイダーとの垂直方向のペアリングをトリガーします。 デバイス用のキューが作成され、ドライバーが構成されています。

1. WFD プロバイダーがデバイスから切断する

実行後の状態

- Wi-fi ダイレクトプリンターの印刷キューが確立されました

- WFD L2 ビーコンチャレンジが成功するたびに、印刷キューが "利用可能" と表示される

代替フロー

該当なし

考慮事項

該当なし

印刷デバイスへの接続エラー

Preconditions

ユーザーは次を使用してペアリングを開始します:

- 上の「最新のデバイスを使用した WI-FI DIRECT 印刷デバイスへの手動接続コントロールパネル」で説明されているように、最新のデバイスコントロールパネル

- 上の「プリンターの追加ウィザードを使用した WI-FI ダイレクト印刷デバイスへの手動接続」で説明されているように、デバイスとプリンターのコントロールパネル

トリガー

ペアリング/キューのセットアップ中にエラーイベントが発生します。

手順

1. 部分的に設定された印刷キューは削除されます。

1. ユーザーには、エラーが通知されます。

実行後の状態

- ペアリングを試行する前に、ユーザーの印刷システムがその状態に戻ります

代替フロー

- ドライバーが見つからないことが原因でエラーが発生し、ドライバーをダウンロードまたは追加できる (x86 または amd64 が従量制以外の接続である) 場合は、ユーザーに対してメッセージが表示され、ペアリングが再試行されます。

考慮事項

該当なし

必要な PIN を使用した WI-FI DIRECT PRINT デバイスへの接続

Preconditions

ユーザーは次を使用してペアリングを開始します:

- 上の「最新のデバイスを使用した WI-FI DIRECT 印刷デバイスへの手動接続コントロールパネル」で説明されているように、最新のデバイスコントロールパネル

- 上の「プリンターの追加ウィザードを使用した WI-FI ダイレクト印刷デバイスへの手動接続」で説明されているように、デバイスとプリンターのコントロールパネル

トリガー

デバイスのペアリングには PIN が必要です

手順

1. ユーザーは、印刷デバイスに必要な PIN を受信しました

1. WSD のセットアップ中に、ユーザーは PIN の入力を求められます。

1. ユーザーが PIN を入力し、ペアリングが完了します。

実行後の状態

- 印刷キューが適切に設定されています

代替フロー

- ドライバーが見つからないことが原因でエラーが発生し、ドライバーをダウンロードまたは追加できる (x86 または amd64 が従量制以外の接続である) 場合は、ユーザーに対してメッセージが表示され、ペアリングが再試行されます。

考慮事項

- アドホック PIN

    1. ユーザーは、Bluetooth ペアリングと同様に、プリンターとデバイスの両方に PIN を入力する必要があります。

    1. WSD セットアップ中に、ユーザーは、メッセージが表示されたら、デバイスとクライアント PC に適切な PIN を入力します。

    1. ユーザーが PIN を入力し、ペアリングが完了します。

- 暗証番号の入力エラー

    1. ユーザーがクライアント PIN を受信したか、アドホック PIN が必要です。

    1. WFD セットアップ中に、PIN の入力を求められます。

    1. ユーザーが正しくない PIN を入力した場合。

    1. PIN が正しくなく、ペアリングを完了できないことがユーザーに通知されます。

    1. 検出を終了します。 キューがセットアップされていません。

**事後**条件: 印刷キューがセットアップされていません。

**印刷**

アプリケーションからの WI-FI DIRECT 印刷デバイスの使用

Preconditions

- ユーザーは Wi-fi Direct 印刷デバイスの範囲内にある

- 前の「プリンターファーストタイムペアリング」で説明されているように、ユーザーは Wi-fi Direct 印刷デバイスとの最初のペアリングを正常に完了しました。

トリガー

ユーザーがアプリケーションからの印刷を試行する

手順

1. DAF は、Wi-fi Direct (WFD) デバイスの L2 チャレンジを発行します。

1. L2 チャレンジに応答する既知の WFD 印刷デバイスは、ユーザーに "使用可能" として表示されます。

1. ユーザーが WFD 印刷デバイスを選択し、[印刷] をクリックします。

1. DAF は、ユーザー選択の WFD デバイスとの L2/L3 接続を確立し、L3 WSD 接続を確立します。 デバイスへの参照カウントがインクリメントされます。

1. 印刷ジョブがスプールされ、レンダリングされて、デバイスに送信されます。

1. デバイスへの参照カウントが減少します。 デクリメント後の参照カウントが0の場合、接続は閉じられます。

実行後の状態

- 印刷ジョブが印刷デバイスに正常に送信されました。

代替フロー

該当なし

考慮事項

- キューは、他のすべての印刷キューと同じ方法で Windows PC に保存されます。 ペアリングとそれ以降の使用の間に経過した時間に関係なく、ユーザーは再接続してデバイスに印刷できることが期待されます。 プリンターが接続情報を排除し、ユーザーのペアリング情報が削除されている場合にのみ、ユーザーが印刷に再ペアを行う必要があります。 ユーザーエクスペリエンスを向上させるために、再ペアリングを最小限にする必要があります。 これは、デバイスが、目的の用途のために維持するのに十分な数の組み合わせをメモリ内に保持する必要があることを意味します。 たとえば、自宅で使用するプリンターでは、10-25 の組み合わせを維持できます。 Office で使用するプリンターは、さらに多くのことを維持できます。

## <a name="considerations-for-pairing"></a>ペアリングに関する考慮事項

**永続的なグループ**

Windows では、Wi-fi Direct 印刷デバイス用に印刷キューを作成すると、再ペアリングせずに、Windows クライアントがそのデバイスに再接続できることを前提としています。 DAF provider for Wi-fi Direct は、キューとデバイスが作成された後に接続を閉じます。 そのため、ユーザーが印刷時にデバイスに再接続するために、ペアリング情報が保存されている必要があります。

各接続の後にデバイス側でペアリング情報が削除されると、ユーザーはデバイスに印刷できなくなります。 ユーザーは、PC 設定でデバイスを追加するループに入ります。接続はセットアップ後に閉じられ、ペアリングが解除され、ユーザーは PC 設定でデバイスを再度追加する必要があります。

**同時接続数**

印刷デバイスが複数の PC 接続要求に応答できることが想定されています。 そのため、このシナリオを実現するには、印刷デバイスに複数のグループとの同時接続を実装する必要があります。

**破棄されたペア**

Windows では、ユーザーが再プロビジョニングせずに Wi-fi Direct キューに印刷できるようにするために、Wi-fi ダイレクトデバイスがペアリング情報を保持することを想定しています。 ただし、デバイスが格納できるペアリングの数は有限であることがわかります。 使用目的に対して適切な数のペアリング接続を維持するには、デバイスに十分なメモリを確保することを強くお勧めします。 たとえば、自宅または小規模オフィスの使用を目的としたデバイスでは、30個の接続を記憶できます。 ただし、広く使用されているデバイスとパブリック環境での再利用を想定しているデバイスでは、接続が頻繁に排除されないようにするために、より多くのユーザーを記憶する必要がある場合があります。

**ペアリングの切断シナリオ**: ユーザーが印刷ジョブを送信するまで、Windows は wi-fi ダイレクトデバイスへの完全な接続を再確立しません。 このため、デバイスが Windows PC のペアリング情報を削除した場合、印刷ジョブが既にキューに置かれるまで、Windows はこれを認識しません。 **ユーザーは接続を再プロビジョニングし、デバイスと再度ペアリングすることができますが、これを行うと、印刷キューが削除され、再構築され、キューに置かれた印刷ジョブがプロセスで失われることになります。** メモリ内で適切な量のペアリングを維持することにより、デバイスは、ユーザーが印刷ジョブを再度ペアリングして再送信する必要があるインスタンスの数を最小限に抑えることができます。

**PC の wi-fi ドライバーに関する考慮事項**

Wi-fi モジュールの Windows 8 ロゴの要件には、Wi-fi Direct をサポートするモジュールが必要です。 ただし、この機能は、モジュール用に提供されるドライバーでもサポートされている必要があります。 Windows 8 のほとんどの受信トレイドライバーは、モジュールが対応できる場合でも Wi-fi Direct をサポートしていません。 これらのモジュールの製造元は、ドライバーサイトから利用可能なドライバーを更新しています。 更新されたドライバーは、次の Windows リリース後に広く使用できるようになります。

**Windows 8 ロゴ WI-FI モジュール**: 次の表に、windows 8 のロゴ用に送信された wi-fi ダイレクトモジュールの完全でない一覧を示します。 この情報は NDA で共有されており、どのような形式でも再頒布することはできません。 このデータは、パートナーが Wi-fi ダイレクトと連携することが期待される Wi-fi モジュールを特定するのに役立つように提供されています。 **6.2.4**に記載されているように、これらのデバイスの受信トレイドライバーは wi-fi Direct をサポートしていない可能性があり、更新されたドライバーはテストの前にダウンロードしてインストールする必要があります。

Windows RT

Broadcom 802.11 abgn Wireless SDIO アダプタ Marvell AVASTAR ワイヤレス-N ネットワークコントローラー (SDIO) Windows 8 (64 ビット)

Atheros ワイヤレスネットワークアダプター Broadcom 802.11 ac ワイヤレスネットワークアダプター Broadcom 802.11 ac ワイヤレス USB アダプター broadcom 802.11 n デュアル帯域ネットワークワイヤレスアダプター Broadcom 802.11 n ネットワークアダプター Broadcom 802.11 n ワイヤレスネットワークアダプター Intel (R) セントリーノ (r) Advanced-N + WiMAX 6150 Intel (r) セントリーノ (R) Advanced-N + WiMAX 6250 Intel (R) Centrino (R) Advanced-N 6200 Intel (R) Centrino (r) Advanced-N 6205 Intel (R) Centrino (R) Advanced-N 6235 Intel (r) centrino (r) ultimate-n 6300 Intel (R) Centrino (r) Ultimate-N 6300 AGN Intel (R) Centrino (R) Wireless-N 105 Intel (R) Centrino (r) Wireless-N 135 Intel (R) セントリーノ (r) wireless-N 2200 Intel (r) Centrino (R) Wireless-N 2230 キラーワイヤレス N Marvell AVASTAR 350N ワイヤレスネットワークコントローラー N150MA N300MA Qualcomm Atheros ワイヤレスネットワークアダプターの Realtek 88 12AU ワイヤレス LAN 802.11 ac USB NIC Realtek RTL8188CE ワイヤレス LAN 802.11 n PCI-E NIC Realtek RTL8188CU/RTL8191CU/RTL8192CU/RTL8188RU ワイヤレス LAN 802.11 n USB 2.0 ネットワークアダプター Realtek RTL8188E ワイヤレス lan 802.11 n pci-e nic realtek RTL8188EE ワイヤレス lan 802.11 n PCI-e NIC Realtek RTL8723A ワイヤレス LAN 802.11 n USB2.0 ネットワークアダプター Realtek RTL8723AE ワイヤレス LAN 802.11 n PCI-E NIC Realtek ワイヤレス LAN 802.11 n USB 2.0 ネットワークアダプター WNA3100M Windows 8 (32 ビット)

Atheros ワイヤレスネットワークアダプター Broadcom 11ac ネットワークワイヤレスアダプター Broadcom 802.11 abgn ワイヤレス LAN SDIO アダプター broadcom 802.11 abgn ワイヤレス SDIO アダプター broadcom 802.11 ac ワイヤレスネットワークアダプター broadcom 802.11 ac ワイヤレス USB アダプター broadcom 802.11 n デュアル帯域ネットワークワイヤレスアダプター broadcom 802.11 n ネットワークアダプター Broadcom 802.11 n ワイヤレスネットワークアダプター Intel (R) Centrino (r) advanced-n + WiMAX 6150 intel (r) centrino (r) advanced-N + WiMAX 6250 intel (r) centrino (r) advanced-n 6200 intel (r) centrino (r) advanced-n 6205 intel (r) セントリーノ (r) advanced-n 6235 intel (r) centrino (r) ultimate-n 6300 intel (r) centrino (r) ultimate-n 6300 AGN INTEL (r) centrino (r) ワイヤレス-n 105 intel (r) centrino (r) ワイヤレス-n 135 intel (r) centrino (r) ワイヤレス-n intel (r) centrino (r 2200) ワイヤレス-N 2230 キラーワイヤレス N Marvell AVASTAR 350N ワイヤレスネットワークコントローラー N150MA N300MA Qualcomm Atheros ワイヤレスネットワークアダプターの Realtek 88 12AU ワイヤレス lan 802.11 ac USB NIC Realtek RTL8188CE ワイヤレス LAN 802.11 n PCI-E NIC Realtek RTL8188CU/RTL8191CU/RTL8192CU/RTL8188RU Wireless LAN 802.11 n USB 2.0 ネットワークアダプター Realtek RTL8188E ワイヤレス LAN802.11 n PCI-E NIC Realtek RTL8188EE ワイヤレス LAN 802.11 n PCI-E NIC Realtek RTL8723A ワイヤレス LAN 802.11 n USB 2.0 ネットワークアダプター Realtek RTL8723AE ワイヤレス LAN 802.11 n PCI-E NIC Realtek ワイヤレス LAN 802.11 n USB 2.0 ネットワークアダプター WNA3100M

**Windows のデバイス名**

Windows では、デバイスがグループの所有者である場合に、Wi-fi P2P IE 形式の P2P デバイス情報サブ要素のデバイス名属性を使用して Windows にデバイス名を設定します。 この属性には、すべての Windows UI でデバイス名として表示されるユーザーのわかりやすい名前を含める必要があります。

![p2p ie 形式 oob デバイス情報要素](images/wfd-p2pieformat.png)

*P2P IE 形式 OOB デバイス情報要素*

**グループの所有権**

印刷デバイスは、常にグループの所有者である必要があります。 Windows プリントシステムは、Windows PC がグループの所有者であるシナリオをサポートしていません。

グループの所有権と 5 GHz のネットワークに関する既知の問題があります。 PC がグループの所有者であり、既に 5 ghz の AP または 5 GHz を超える P2P グループに接続されている場合、Windows では 2.4 GHz チャネルを使用したデバイスとのペアリングはサポートされません。

グループ所有者として Windows が Wi-fi ダイレクトデバイスとの接続をネゴシエートすると、Windows は通信用の優先チャネルを提供します。 優先チャネルが 5 GHz の範囲内にある場合、2.4 GHz のみをサポートするデバイスは、そのチャネルを使用できません。 Windows は2つの帯域幅グループを維持しません。既存のグループまたは AP 接続を 2.4 GHz に移動する機能はありません。 この場合、印刷デバイスは検出されますが、チャネルを確立できないため、ペアリングは常に失敗します。

ユーザーがこのシナリオに遭遇するのを防ぐため、Windows 印刷では、印刷デバイスがグループの所有者である必要があります。 P2P ネットワーク上のクライアントとしての Windows は、デュアルバンドシナリオを管理できます。 このため、ユーザーがプリンターを検出できても、既存の AP 接続のためにペアリングできなくなる状況はありません。
