---
title: プラグ アンド プレイのサポート
description: このセクションでは、ユニバーサルシリアルバス上の列挙プロセスについて説明します。
ms.assetid: CB3D76DB-4A96-4A19-BC1C-C9181A12B04E
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 9e5166f6598c96fae69616bb4f277c76e44f6f18
ms.sourcegitcommit: ca5045a739eefd6ed14b9dbd9249b335e090c4e9
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/06/2020
ms.locfileid: "85968473"
---
# <a name="plug-and-play-support"></a>プラグ アンド プレイのサポート


このセクションでは、ユニバーサルシリアルバス上の列挙プロセスについて説明します。

デバイスが Windows ベースのコンピューターに接続されている場合、Windows USB スタックはデバイスを列挙し、デバイスのインターフェイス記述子 (または記述子) を含む詳細をデバイスから抽出してから、デバイスのハードウェア Id と互換性のある Id のセットを生成します。

USB ハードウェア Id の完全な一覧については、「デバイスのインストール」の「デバイス Id 文字列」セクションを参照してください。

次のセクションの例では、2つのシナリオについて説明します。

-   単一インターフェイス USB デバイスの USB Id
-   マルチインターフェイス (複合) USB デバイスの USB Id

*例 1: 単一インターフェイス HID USB デバイス*

この例では、Windows 2000 または Windows XP を実行しているシステム上のシングルインターフェイス USB デバイスに対して、ハードウェア Id と互換性 Id がどのように生成されるかを示します。

デバイスがもともと USB スタックで列挙されている場合、USBHUB ドライバーはデバイス記述子から**Idvendor**、 **idvendor**、および**bcddevice**を抽出します。 これら3つのフィールドは、USB ハードウェア ID を生成するために組み込まれています。 仕入先、デバイス、およびリビジョン番号は、常に16進形式で格納されていることに注意してください。

デバイスの互換性のある ID の生成はより複雑です。 クラスコード、サブクラスコード、およびプロトコルコードは、インターフェイス記述子の**bInterfaceClass**、 **BInterfaceSubClass**、および**binterfaceprotocol**によって決定されます。 これらの値は、2桁の16進形式です。

**メモ**   INF を指定する場合、ハードウェア識別子は、次の表の左側の列にある**太字**の識別子と一致している必要があります。 (右側の列に示されている互換性のある識別子を使用しないようにしてください)。

 

**ハードウェア識別子**: 互換性のある識別子

USB \\ Vid \_ Xxxx&Pid \_ yyyy&Rev \_ zzzz * * * *: Usb \\ クラス \_ Aa&サブクラス \_ bb&prot.13 \_ cc

USB \\ Vid \_ Xxxx&Pid \_ yyyy * * * *: usb \\ クラス \_ aa&サブクラス \_ bb

: USB \\ クラス \_ aa


 

*例 2: 複数のインターフェイス/関数 HID USB デバイス (複合デバイス)*

複数の機能を持つ USB デバイスは、複合デバイスと呼ばれます。 この例は、Windows 上の複合 USB デバイスに対してハードウェア Id と互換性 Id がどのように生成されるかを示しています。 Windows を実行しているコンピューターシステムに新しい USB 複合デバイスが接続されている場合、USBHUB ドライバーは物理デバイスオブジェクト (PDO) を作成し、子デバイスのセットが変更されたことをオペレーティングシステムに通知します。 ハブドライバに対して、新しい PDO に関連付けられているハードウェア Id を照会した後、適切な INF ファイルを検索して、識別子の一致を検索します。 ベンダーがデバイス全体に対してドライバーを1つだけ読み込む (複合デバイスドライバーを使用しない) ことを選択し、そのドライバーを使用してソフトウェア内のすべてのインターフェイスを多重化する場合、ベンダーはハードウェア ID の一致を指定して、オペレーティングシステムが低い順位の一致 (USB 複合) を選択できないようにする必要があり \\ ます。

**メモ**   INF を指定する場合、ハードウェア識別子は、次の表の左側の列にある**太字**の識別子と一致している必要があります。 (右側の列に示されている互換性のある識別子を使用しないようにしてください)。

 

**ハードウェア識別子**: 互換性のある識別子

USB \\ Vid \_ Xxxx&Pid \_ yyyy&Rev \_ zzzz * * * *: Usb \\ クラス \_ Aa&サブクラス \_ bb&prot.13 \_ cc

USB \\ Vid \_ Xxxx&Pid \_ yyyy * * * *: usb \\ クラス \_ aa&サブクラス \_ bb

: USB \\ クラス \_ aa

: USB \\ 複合


 

ただし、ハードウェアの一致が見つからない場合、Windows プラグアンドプレイは usb 複合識別子を使用して \\ Usb 汎用親ドライバー (USBCCGP) を読み込みます。 次に、汎用の親ドライバーは、複合デバイスのインターフェイスごとに個別の一連のハードウェア Id を持つ一連の PDOs (インターフェイスごとに1つ) を作成します。 次のセクションでは、子 PDOs のハードウェア Id の形式を示します。

各インターフェイスの PDO のハードウェア Id のセットを作成するために、USBCCGP ドライバーは、インターフェイス番号 (0 から始まる16進値) をハードウェア ID の末尾に追加します。

クラスコード、サブクラスコード、およびプロトコルコードは、それぞれインターフェイス記述子の**bInterfaceClass**、 **BInterfaceSubClass**、および**binterfaceprotocol**フィールドによって決定されます。 これらの値は、2桁の16進形式です。

**メモ**   INF を提供する場合は、ドライバーを読み込むか、デバイス名をわかりやすくするために、ハードウェア識別子は、次の表の左側の列にある**太字**の識別子と一致する必要があります。 (右側の列に示されている互換性のある識別子を使用しないようにしてください)。

 

**ハードウェア識別子**: 互換性のある識別子

USB \\ Vid \_ Xxxx&Pid \_ yyyy&REV \_ zzzz&MI \_ ww * * * *: USB \\ クラス \_ aa&サブクラス \_ bb&prot.13 \_ cc

USB \\ Vid \_ Xxxx&Pid \_ yyyy&MI \_ ww * * * *: Usb \\ クラス \_ aa&サブクラス \_ bb

: USB \\ クラス \_ aa


 

 

 




