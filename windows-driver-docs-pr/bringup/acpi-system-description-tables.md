---
title: ACPI システム記述テーブル
description: SoC ベースのプラットフォームでは、Advanced Configuration and Power Interface (ACPI) ハードウェア仕様の実装は必須ではありませんが、ACPI ソフトウェアの仕様の多くは必須です。
ms.assetid: 6EFCD288-031D-46BB-ABF3-8ADB53E7B4B1
ms.date: 05/20/2020
ms.localizationpriority: medium
ms.openlocfilehash: 81c9481b1717eb8972a85367f6884ef05bcdc678
ms.sourcegitcommit: cbcb712a9f1f62c7d67e1b98097a0d8d24bd0c71
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/21/2020
ms.locfileid: "83769390"
---
# <a name="acpi-system-description-tables"></a>ACPI システム記述テーブル

SoC ベースのプラットフォームでは、Advanced Configuration and Power Interface (ACPI) ハードウェア仕様の実装は必須ではありませんが、ACPI ソフトウェアの仕様の多くは必須です。 ACPI では、汎用的な拡張可能なテーブル渡しメカニズムに加え、プラットフォームをオペレーティングシステムに記述するための特定のテーブルが定義されています。

ID フィールドとチェックサムフィールドを含むテーブル構造とヘッダーは、 [ACPI 5.0 仕様](https://uefi.org/specifications)で定義されています。 Windows では、この記事で説明されている特定のテーブルに加えて、このテーブル渡しメカニズムを利用しています。

これらの表の背後にある考え方は、さまざまな方法でさまざまなプラットフォームに統合できる標準の知的財産 (IP) ブロックを汎用ソフトウェアがサポートできるようにすることです。 テーブル戦略では、特定のプラットフォームのプラットフォーム変数属性がテーブルで提供され、汎用ソフトウェアによって、プラットフォームに統合されている特定の IP ブロックのセットに適応されます。 このようなソフトウェアは、一度記述して十分にテストしてから、時間の経過と共に最適化することができます。

## <a name="root-system-description-pointer-rsdp"></a>ルートシステムの説明ポインター (RSDP)

Windows は、ハードウェアプラットフォームを起動する UEFI ファームウェアに依存しています。 このため、 [ACPI 5.0 仕様](https://uefi.org/specifications)の「UEFI 対応システムでの Rsdp の検索」で説明されているように、WINDOWS は EFI システムテーブルを使用して rsdp を見つけます。 プラットフォームのファームウェアにより、RSDT の RSDT または XSDT のアドレスが入力されます。 (両方のテーブルアドレスが指定されている場合、Windows では XSDT が優先されます)。

## <a name="root-system-description-table-rsdt"></a>ルートシステムの説明テーブル (RSDT)

RSDT (または XSDT) には、プラットフォームで提供されるその他のシステム説明テーブルへのポインターが含まれています。 具体的には、このテーブルには次のポインターが含まれています。

- ACPI ハードウェアの固定テーブル (FADT)

- 複数の割り込みコントローラーテーブル (MADT)

- 必要に応じて、コアシステムリソーステーブル (CSRT)

- デバッグポートテーブル 2 (DBG2)

- ブートグラフィックスリソーステーブル (BGRT)

- ファームウェアパフォーマンスデータテーブル (FPDT)

- 基本システムの説明テーブル (DSDT)

- 必要に応じて、追加のシステム記述テーブル (SSDT)

## <a name="fixed-acpi-description-table-fadt"></a>ACPI の説明の表 (FADT) を修正します。

固定 ACPI ハードウェアテーブル (FADT) には、プラットフォームで使用できるさまざまな固定ハードウェア機能に関する重要な情報が含まれています。 ハードウェアが低下した ACPI プラットフォームをサポートするために、ACPI 5.0 は FADT テーブルの定義を次のように拡張します。

- FADT (オフセット 112) 内の Flags フィールドには、次の2つの新しいフラグがあります。

    ハードウェア \_ が \_ ACPI ビットオフセット20を下げました。 ACPI ハードウェアがこのプラットフォームで使用できないことを示します。 ACPI 固定ハードウェアプログラミングモデルが実装されていない場合は、このフラグを設定する必要があります。

    低 \_ 電力 \_ \_ の S0 アイドル状態 \_ 対応ビットオフセット21。 プラットフォームが、どの Sx スリープ状態よりもエネルギー効率が高い、ACPI S0 システムの電源状態内での低電力アイドル状態をサポートすることを示します。 このフラグが設定されている場合、Windows はスリープと再開を試行せず、代わりにプラットフォームのアイドル状態と接続されたスタンバイを使用します。

- FADT 優先 \_ PM \_ プロファイルフィールド (バイトオフセット 45) には、新しいロールエントリ "タブレット" があります。 この役割は、ディスプレイと入力の電源管理ポリシーに影響し、画面上のキーボードの表示に影響します。
- "IA-PC ブートアーキテクチャフラグ" フィールド (オフセット 109) には、PC の CMOS RTC が実装されていないか、レガシアドレスに存在しないことを示す新しい "CMOS RTC Not Present" フラグ (ビットオフセット 5) が付いています。 このフラグが設定されている場合、プラットフォームは ACPI 時刻とアラーム制御メソッドデバイスを実装する必要があります。 詳細については、「 [ACPI で定義さ](acpi-defined-devices.md)れたデバイス」トピックの「**コントロールメソッドの時刻とアラームのデバイス**」セクションを参照してください。
- ハードウェアが低下した ACPI プラットフォームでの従来の PC スリープ/再開をサポートするために、新しいフィールドが追加されました。 これらのフィールドは Windows では無視されますが、対応するためにテーブルに存在している必要があります。
- ハードウェアの低下した \_ \_ acpi フラグが設定されている場合、Acpi ハードウェア仕様に関連するすべてのフィールドはオペレーティングシステムによって無視されます。

その他のすべての FADT 設定は、以前のバージョンの ACPI 4.0 の意味を保持します。 詳細については、 [acpi 5.0 仕様](https://uefi.org/specifications)のセクション5.2.9 「Fixed Acpi Description TABLE (FADT)」を参照してください。

## <a name="multiple-apic-description-table-madt"></a>複数の APIC Description テーブル (MADT)

ACPI の PC 実装では、複数の APIC Description Table (MADT) と PC 固有の割り込みコントローラー記述子を使用して、システムの割り込みモデルが記述されています。 ARM ベースの SoC プラットフォームの場合、ACPI 5.0 では、ARM の所有元の GIC (汎用割り込みコントローラー) と GIC ディストリビューターの記述子が追加されます。 Windows には、GIC および GIC ディストリビューターの受信トレイサポートが含まれています。 これらの記述子の詳細については、 [ACPI 5.0 仕様](https://uefi.org/specifications)のセクション5.2.12.14、"GIC structure"、および 5.2.12.15 "GIC ディストリビューター Structure" を参照してください。

割り込みコントローラー記述子の構造体は、MADT の Flags フィールドの直後に表示されます。 ARM プラットフォームでは、GIC ごとに1つの記述子が表示され、その後に各 GIC ディストリビューターに1つの記述子が続きます。 ブートプロセッサに対応する GIC は、割り込みコントローラー記述子の一覧の最初のエントリである必要があります。

## <a name="generic-timer-description-table-gtdt"></a>汎用タイマーの説明の表 (GTDT)

割り込みコントローラーと同様に、ACPI には標準のタイマー説明テーブルがあります。 GIT タイマーを利用する ARM システムの場合、ACPI の GTDT を使用して、Windows での GIT の組み込みサポートを利用できます。

## <a name="core-system-resources-table-csrt"></a>コアシステムリソースの表 (CSRT)

コアシステムリソース (Csr) は、割り込みコントローラー、タイマー、およびオペレーティングシステムがアクセスをシリアル化する必要がある DMA コントローラーなどの共有ハードウェア機能です。 タイマーや割り込みコントローラーなどの機能 (x86 アーキテクチャと ARM アーキテクチャの両方) に対して業界標準が存在する場合、Windows は、ACPI で説明されている標準テーブル (MADT、GTDT など) に基づいてこれらの機能のサポートを構築します。 ただし、DMA コントローラーインターフェイス標準に対して業界が収束するまでは、オペレーティングシステムでいくつかの非標準デバイスをサポートする必要があります。

Windows では、この問題に対処するための HAL 拡張機能の概念をサポートしています。 HAL 拡張機能は、Dll として実装されている SoC 固有のモジュールであり、windows HAL を、Windows が必要とする特定の CSR クラスの特定のハードウェアインターフェイスに適応します。 これらの非標準の CSR モジュールを特定して読み込むために、Microsoft では新しい ACPI テーブルを定義しました。 このテーブルは、ACPI 仕様に "CSRT" という予約済みの署名が含まれており、プラットフォームで非標準の Csr が使用されている場合に RSDT に含める必要があります。

この CSRT では、Csr のリソースグループについて説明します。各リソースグループは、特定の種類のハードウェアを識別します。 Windows では、リソースグループに指定された識別子を使用して、このグループに必要な HAL 拡張機能を検索して読み込みます。 CSRT 内のリソースグループには、CSR の種類や HAL 拡張機能のニーズに応じて、個々のリソース記述子を含めることもできます。 これらのリソース記述子の形式と使用は、HAL 拡張機能ライターによって定義されます。これにより、拡張機能の移植性が高くなり、CSRT に含まれているリソース記述子を変更するだけで、さまざまな SoC プラットフォームをサポートできるようになります。

HAL 拡張機能のメンテナンスをサポートし、これらの拡張機能によって使用されるシステムリソースを管理するには、CSRT で説明されている各リソースグループも、プラットフォームの ACPI 名前空間内のデバイスとして表す必要があります。 詳細については、次の「差別化されたシステム記述テーブル (DSDT)」セクションを参照してください。 リソースグループヘッダーで使用されるデバイス識別子は、デバイスの名前空間ノードで使用される識別子と一致している必要があります。 詳細については、「[デバイス管理の名前空間オブジェクト](device-management-namespace-objects.md)」トピックの「 **ACPI でのデバイス id** 」セクションを参照してください。 これらのリソースグループの名前空間デバイスが存在することにより、Windows Update サービスが HAL の拡張機能を処理できるようになります。

詳細については、「[コアシステムリソーステーブル (CSRT) の仕様](https://acpica.org/related-documents)」を参照してください。

## <a name="debug-port-table-2-dbg2"></a>デバッグポートテーブル 2 (DBG2)

Microsoft では、すべてのシステムでデバッグポートを必要とします。 プラットフォームに組み込まれているデバッグポートについて説明するために、Microsoft では、ACPI 用のデバッグポートテーブル 2 (DBG2) を定義しています。 このテーブルは、デバッグのために1つ以上の独立したポートを指定します。 DBG2 テーブルが存在することは、プラットフォームに少なくとも1つのデバッグポートが含まれていることを示しています。 このテーブルには、デバッグポートの id と構成に関する情報が含まれています。 このテーブルは、システムメモリに他の ACPI テーブルと共に配置され、ACPI RSDT テーブルで参照される必要があります。

Windows では、DBG2 テーブルのポートの種類の値を使用して、システムに必要なカーネルデバッガー (KD) トランスポート (USB やシリアルなど) を特定し、読み込みます。 次に、KD トランスポートは、DBG2 テーブルの Port Subtype 値を使用して、ポートで使用されるハードウェアインターフェイスを識別します。 DBG2 テーブルのその他の情報は、指定されたサブタイプのハードウェアインターフェイスモジュールによって使用されるポートレジスタのシステムアドレスを指定します。 最後に、DBG2 テーブルには、デバッグポートに対応する ACPI 名前空間のデバイスノードへの参照を含める必要があります。 この参照を使用すると、デバッグの使用とデバイスの通常使用 (存在する場合) との競合を Windows が管理できるようになります。また、デバッガーと電源遷移を統合することもできます。

詳細については、 [Microsoft Debug Port Table 2 (DBG2) の仕様](https://docs.microsoft.com/previous-versions/windows/hardware/design/dn639131(v=vs.85))を参照してください。

## <a name="differentiated-system-description-table-dsdt"></a>区別されるシステムの説明テーブル (DSDT)

ACPI では、プラットフォーム上の周辺機器とシステムハードウェアの機能について説明します。これは、ブート時に読み込まれる、または実行時に動的に読み込まれる、セカンダリシステム記述テーブル (DSDT) で記述されています。 一般に、ソケットの場合、プラットフォームの構成は静的であるため、DSDT は十分ですが、SSDTs を使用してプラットフォームの説明のモジュール性を向上させることもできます。

ACPI は、解釈された言語 (ACPI ソース言語、ASL) と、システムデバイスと機能を記述するための実行環境 (ACPI 仮想マシン) と、OS に依存しない方法で、プラットフォーム固有の制御を定義します。 ASL は、ACPI 名前空間で名前付きオブジェクトを定義するために使用され、 [MICROSOFT ASL コンパイラ](microsoft-asl-compiler.md)を使用して、dsdt のオペレーティングシステムに送信するための acpi 機械語 (AML) バイトコードを生成します。 受信トレイ[WINDOWS acpi ドライバー](https://docs.microsoft.com/windows-hardware/drivers/kernel/acpi-driver)(acpi) は、acpi 仮想マシンを実装し、AML バイトコードを解釈します。 AML オブジェクトは単に説明情報を返す場合があります。 また、AML オブジェクトは、計算を実行するメソッド、または i/o 操作を実行するメソッドである場合もあります。 *コントロールメソッド*は、オペレーティングシステムのデバイスドライバーを使用してプラットフォームハードウェアで i/o 操作を実行する、実行可能な AML オブジェクトです。 ASL は、OpRegions を使用して、オペレーティングシステムでアクセスできるさまざまなアドレス空間を抽象化します。 制御メソッドは、OpRegions で宣言された名前付きフィールドとの間で送受信される一連の転送として、i/o 操作を実行します。

OpRegions の詳細については、 [ACPI 5.0 仕様](https://uefi.org/specifications)の「5.5.2.4 To Operation Region (操作領域へのアクセス)」を参照してください。 ASL およびコントロールメソッドの詳細については、ACPI 5.0 仕様のセクション5.5 「ACPI 名前空間」を参照してください。

Windows では、ASL コードの開発とデバッグがサポートされています。 ASL コンパイラには、実装者がデバッグターゲットから名前空間を読み込むことができるようにする逆アセンブラーが含まれています。 その後、ASL コンパイラを使用して、システムファームウェアをフラッシュすることなく、迅速なプロトタイプとテストのために名前空間をターゲットに再適用できます。 また、Windows カーネルデバッガーは、Acpi ドライバーの checked (CHK) バージョンと共に、AML 実行のトレースと分析をサポートしています。 詳細については、「 [AMLI デバッガー](https://docs.microsoft.com/windows-hardware/drivers/debugger/introduction-to-the-amli-debugger)」を参照してください。

## <a name="windows-smm-security-mitigations-table-wsmt"></a>Windows SMM のセキュリティ対策に関する表 (WSMT)

Windows SMM Security Mitigations Table (WSMT) の仕様には、Advanced Configuration and Power Interface (ACPI) テーブルの詳細が記載されています。このテーブルは、Windows の仮想化ベースのセキュリティ (VBS) 機能をサポートする Windows オペレーティング システムで使用するために作成されたものです。

この情報は、次のオペレーティングシステムに適用されます。

Windows Server 2016

Windows 10 Version 1607

詳細については、「 [Windows の SMM セキュリティ緩和テーブル (WSMT) の仕様](https://go.microsoft.com/fwlink/p/?LinkId=786943)」を参照してください。
