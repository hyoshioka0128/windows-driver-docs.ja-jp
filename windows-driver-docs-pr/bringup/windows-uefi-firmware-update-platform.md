---
title: Windows UEFI ファームウェア更新プラットフォーム
description: Windows では、UpdateCapsule 関数を使用して処理されるドライバーパッケージによるシステムおよびデバイスのファームウェアの更新プログラムのインストールをサポートしています。
ms.assetid: 9F0D22FB-3C83-4F90-8E24-2205EEF9D5F7
ms.date: 05/26/2020
ms.localizationpriority: medium
ms.openlocfilehash: e3c2c0e6398f6ba534e61209a1c6875ab59c622e
ms.sourcegitcommit: 5273e44c5c6c1c87952d74e95e5473c32a916d10
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/28/2020
ms.locfileid: "84122688"
---
# <a name="windows-uefi-firmware-update-platform"></a>Windows UEFI ファームウェア更新プラットフォーム

Windows は、UEFI UpdateCapsule 機能を使用して処理されるドライバーパッケージを使用して、システムとデバイスのファームウェアの更新プログラムをインストールするためのプラットフォームをサポートしています。 このプラットフォームにより、一貫性のある信頼性の高いファームウェア更新エクスペリエンスが提供され、エンドユーザーにとって重要なシステムファームウェア更新プログラムの発見可能性が向上します。

UEFI ファームウェア更新プラットフォームのガイダンスは、Windows を実行するハードウェアプラットフォームを構築している SoC ベンダーおよび Oem を対象としています。 UEFI ファームウェア更新プラットフォームは、次のオペレーティングシステムのバージョンでサポートされています。

- Windows 8
- Windows 8.1
- Windows 10 デスクトップ エディション (Home、Pro、Enterprise、Education)
- Windows 10 Mobile

## <a name="uefi-firmware-update-support-in-windows-10"></a>Windows 10 での UEFI ファームウェア更新のサポート

Windows 10 for desktop エディションを実行しているすべてのシステムは、ドキュメントのこのセクションで説明されている UpdateCapsule ベースの更新プロセスに従って、UEFI ファームウェア更新プログラムを実装する必要があります。

Windows 10 Mobile を実行するデバイスは、Windows 10 Desktop で使用される UpdateCapsule ベースのプロセスに従うことができます。 これらのデバイスは、バイナリ更新プロセスに従うこともできます。これにより、UEFI ファームウェアを含むストレージパーティションに対するバイナリ更新が実行されます。

Windows 10 Mobile を実行するデバイスでは、バイナリ更新プロセスを使用して UEFI ファームウェアを更新することを強くお勧めします。 Windows 10 Mobile を実行するデバイスは、バイナリの更新プロセスを使用できないシナリオでのみ、UpdateCapsule ベースのプロセスを使用できます。 たとえば、デバイスのパーティションレイアウトで、バイナリ更新パッケージを使用して UEFI ファームウェアが更新されないようにします。

Windows 10 Mobile 用の spkg パッケージの詳細については、「[パッケージの作成](https://docs.microsoft.com/previous-versions/windows/hardware/packaging/dn756642(v=vs.85))と[更新](https://docs.microsoft.com/windows-hardware/service/mobile/index)」を参照してください。

## <a name="overview-of-the-uefi-firmware-update-platform"></a>UEFI ファームウェア更新プラットフォームの概要

Windows を使用してサービスを提供できるファームウェアには、システムファームウェアとデバイスファームウェアの2種類があります。 システムファームウェアは、重要なブートサービスとランタイムサービスをシステム全体に提供する役割を担い、デバイスのファームウェアは、システムに統合されている特定のデバイスに関連付けられます。 通常、このようなデバイスのファームウェアはデバイスドライバーと連動し、OS がデバイスを OS レベルのサービスとアプリケーションに公開できるようにします。

### <a name="system-firmware-updates"></a>システムファームウェアの更新

UEFI ベースシステムのシステムファームウェアの更新プログラムは、デバイスドライバーパッケージ (Inf) として展開されます。 Windows では、プラットフォームによって提供される情報を使用して、更新プログラムパッケージが適切なシステムにのみ適用されるようにします。 ファームウェア更新パッケージには、システムファームウェアイメージを含むバイナリファイルが含まれています。 ファームウェア更新パッケージがエンドユーザーのシステム上にあると、Windows は UEFI UpdateCapsule 関数を使用して、ファームウェアペイロードを処理のためにプラットフォームファームウェアに渡します。

更新プログラムをドライバーパッケージとして展開すると、ファームウェアの更新プロセスを既存の多くの展開およびサービスツールに適合させることができ、ハードウェアベンダーにとって簡単な更新プログラムパッケージの作成が可能になります。

> [!NOTE]
> ファームウェアの更新プログラムがドライバーパッケージとして配布されるという事実は、更新プログラムが実際のドライバーとして書き込まれているわけではありません。 ドライバーパッケージには、システムまたはデバイスのファームウェアイメージを含む INF ファイルとバイナリファイルが含まれます。

### <a name="device-firmware-updates"></a>デバイスのファームウェアの更新

デバイスのファームウェアを更新するために、デバイスのファームウェアを次の2つのカテゴリのいずれかに割り当てることができます。

- UEFI-更新可能なデバイスのファームウェア。

    このデバイスファームウェアは、システムファームウェアと同じメカニズムを利用しているデバイスドライバーパッケージを使用して更新できます。 デバイスファームウェアの更新プログラムは、ファームウェアの更新パッケージとして配布されます。 ファームウェア更新パッケージがエンドユーザーのシステム上にあると、Windows は UEFI UpdateCapsule 関数を使用して、デバイスのファームウェアペイロードを処理のためにプラットフォームファームウェアに渡します。 このプロセスは、Windows がシステムファームウェア更新ペイロードをハンドオフする方法と実質的に同じであり、後で説明します。

    個別のファームウェア更新ドライバパッケージを使用してデバイスのファームウェアを更新することをお勧めしますが、単一のファームウェア更新ドライバパッケージの一部として、システムファームウェアを使用してデバイスのファームウェアを更新することもできます。

    **メモ**   UEFI を使用して周辺機器を更新することはできません。 UEFI では、再起動中にデバイスが存在している必要があります。このファームウェア更新プログラムは、(外部、リムーバブル) 周辺機器では保証できません。

- ドライバーで更新可能なデバイスのファームウェア。

    このデバイスファームウェアは、通常の Windows OS ランタイム中にデバイスドライバーによって更新されます。 通常の Windows OS ドライバーを使用したデバイスファームウェアの更新については、このホワイトペーパーでは説明しません。

### <a name="system-requirements-for-windows-firmware-updates"></a>Windows ファームウェアの更新プログラムのシステム要件

システムが Windows ファームウェア更新メカニズムと互換性を持たせるためには、次の要件を満たしている必要があります。

- [UEFI 仕様](https://uefi.org/specifications)のセクション7.5.3 で定義されているように、システムは UpdateCapsule と QueryCapsuleCapabilities を実装する必要があります。

    UpdateCapsule は、Windows とプラットフォームファームウェアの間でファームウェア更新ペイロードを渡すために使用されます。

- プラットフォームファームウェアは、Windows によって開始されるファームウェア更新をサポートする必要があります。

    システムファームウェアと、デバイスファームウェアの一部のクラスは、このプロセスを使用して更新可能である必要があります。 ファームウェアコードは、UpdateCapsule に渡されるファームウェア更新ペイロードを認識し、更新プロセスを開始します。 実装はパートナーによって所有されています。

- EFI システムリソーステーブル (ESRT) でファームウェアリソースを指定する必要があります

    ファームウェアリソースを使用すると、Windows はハードウェア ID を使用してデバイスインスタンスを表示できます。これは、システムまたはデバイスファームウェアの更新を適切なシステムおよびデバイスに適用するために使用されます。 また、現在のファームウェアのバージョンと、以前の更新の状態を示します。

    システムファームウェアの更新には1つのエントリが存在します。 システムファームウェアの更新の一部としてデバイスのファームウェアを更新しない限り、更新可能なファームウェアを持つすべてのデバイスには ESRT で指定されたリソースが必要です。

    詳細については、「 [Esrt テーブルの定義](esrt-table-definition.md)」を参照してください。

## <a name="in-this-section"></a>このセクションの内容

- [ファームウェア ドライバー パッケージを介したシステムとデバイスのファームウェアの更新](system-and-device-firmware-updates-via-a-firmware-driver-package.md)

- [UEFI ファームウェア更新プログラムのサポートの実装](implementing-support-for-uefi-firmware-updates.md)

- [UEFI ファームウェア更新プログラム用のユーザー エクスペリエンス](user-experience-for-uefi-firmware-updates.md)
