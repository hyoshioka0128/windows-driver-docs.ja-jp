---
title: .dump (ダンプ ファイルの作成)
description: .Dump コマンドは、ユーザーモードまたはカーネルモードのクラッシュダンプファイルを作成します。
ms.assetid: df6bcf7f-eb2e-4605-87a0-c0a7e9e4776b
keywords:
- ダンプファイルの作成 (.dump) コマンド
- ダンプファイル、ダンプファイルの作成 (.dump) コマンド
- . ダンプ (ダンプファイルの作成) Windows デバッグ
ms.date: 08/01/2018
topic_type:
- apiref
api_name:
- .dump (Create Dump File)
api_type:
- NA
ms.localizationpriority: medium
ms.openlocfilehash: edbe1c9c7a3d2adc25a46bab2d535c2337842542
ms.sourcegitcommit: ca5045a739eefd6ed14b9dbd9249b335e090c4e9
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/06/2020
ms.locfileid: "85968047"
---
# <a name="dump-create-dump-file"></a>.dump (ダンプ ファイルの作成)


**.Dump**コマンドは、ユーザーモードまたはカーネルモードのクラッシュダンプファイルを作成します。

```dbgcmd
.dump Options FileName 
.dump /?
```

## <a name="span-idddk_meta_create_dump_file_dbgspanspan-idddk_meta_create_dump_file_dbgspanparameters"></a><span id="ddk_meta_create_dump_file_dbg"></span><span id="DDK_META_CREATE_DUMP_FILE_DBG"></span>パラメータ


<span id="_______Options______"></span><span id="_______options______"></span><span id="_______OPTIONS______"></span>*オプション*   
次のオプションの1つ以上を表します。

<span id="_o"></span><span id="_O"></span>**/o**  
同じ名前の既存のダンプファイルを上書きします。 このオプションを使用せず、同じファイル名のファイルが存在する場合は、ダンプファイルは書き込まれません。

<span id="_f_FullOptions_"></span><span id="_f_fulloptions_"></span><span id="_F_FULLOPTIONS_"></span>**/f \[ **<em>FullOptions</em>**\]**  
(カーネルモード:)[メモリダンプ全体](complete-memory-dump.md)を作成します。

(ユーザーモード:)*完全なユーザーモードダンプ*を作成します。 詳細については、「[ユーザーモードのダンプファイルの種類](user-mode-dump-files.md#varieties)」を参照してください。 名前にかかわらず、最大のミニダンプファイルには、完全なユーザーモードダンプよりも多くの情報が含まれています。 たとえば、 **. dump/mf**または **. dump/ma**は、**ダンプ/f**よりも大きいファイルを作成します。 ユーザーモードでは、 **. dump** **/m \[ **<em>minioptions</em> **\]** は常により適して**います。ダンプ/f**。

ダンプファイルの内容を変更するには、次の*FullOptions*を追加します。オプションでは大文字と小文字が区別されます。

すべての**効果: 効果**

**y**: ダンプファイルに AVX register 情報を追加します。

 

<span id="_m_MiniOptions_"></span><span id="_m_minioptions_"></span><span id="_M_MINIOPTIONS_"></span>**/m \[ **<em>Minioptions</em>**\]**  
*小さいメモリダンプ*(カーネルモードの場合) または*ミニダンプ*(ユーザーモード) を作成する詳細については、「[ユーザーモードのダンプファイル](user-mode-dump-files.md)」を参照してください。 **/F**も **/m**も指定しない場合、 **/m**が既定値になります。

ユーザーモードでは、別の*ミニオプション*を使用して、ダンプに含める追加のデータを**指定できます**。 *Minioptions*が含まれていない場合、ダンプにはモジュール、スレッド、およびスタックの情報が含まれますが、追加のデータは含まれません。 次のいずれかの*ミニオプション*を追加して、ダンプファイルの内容を変更できます。大文字と小文字が区別されます。

|MiniOption|効果|
|--- |--- |
|a|すべてのオプションの追加を使用してミニダンプを作成します。 /Ma オプションは、/mfFhut に相当します。これは、完全なメモリデータの追加、データの処理、モジュール情報のアンロード、基本的なメモリ情報、およびスレッド時間情報をミニダンプに追加します。 参照できないメモリの読み取りに失敗すると、ミニダンプ生成が終了します。|
|A|/Ma オプションは、/ma に相当します。ただし、利用できないメモリの読み取りに失敗した場合は無視され、ミニダンプの生成は続行されます。|
|f|ミニダンプにメモリデータ全体を追加します。 ターゲットアプリケーションが所有している、アクセス可能なすべてのコミット済みページが含まれます。|
|F|すべての基本メモリ情報をミニダンプに追加します。 これにより、有効なメモリに関する情報だけでなく、すべての基本的なメモリ情報を含むミニダンプにストリームが追加されます。 これにより、ミニダンプのデバッグ中に、デバッガーがプロセスの完全な仮想メモリレイアウトを再構築できます。|
|h|ターゲットアプリケーションに関連付けられているハンドルに関するデータをミニダンプに追加します。|
|u|アンロードされたモジュール情報をミニダンプに追加します。 これは、Windows Server 2003 以降のバージョンの Windows でのみ使用できます。|
|t|ミニダンプにスレッド情報を追加します。 これにはスレッド時間が含まれます。これは、ミニダンプのデバッグ時に、! ランナウェイ拡張子または. ttime ([スレッド時間の表示)] コマンドを使用して表示できます。|
|i|ミニダンプにセカンダリメモリを追加します。 セカンダリメモリは、スタックまたはバッキングストアのポインターによって参照される任意のメモリと、このアドレスを囲む小さい領域で参照されます。|
|p|プロセス環境ブロック (PEB) とスレッド環境ブロック (TEB) のデータをミニダンプに追加します。 これは、アプリケーションのプロセスとスレッドに関する Windows システム情報にアクセスする必要がある場合に便利です。|
|。|コミットされたすべての読み取り/書き込みプライベートページをミニダンプに追加します。|
|d|実行可能イメージ内のすべての読み取り/書き込みデータセグメントをミニダンプに追加します。|
|c|イメージ内にコードセクションを追加します。|
|r|スタックの各部分をミニダンプから削除し、スタックトレースの再作成には役立たないメモリを格納します。 ローカル変数とその他のデータ型の値も削除されます。 このオプションを使用すると、ミニダンプのサイズが小さくなりません (これらのメモリセクションは単にゼロになっているため)。ただし、他のアプリケーションのプライバシーを保護する場合に便利です。|
|R|ミニダンプから完全なモジュールパスを削除します。 モジュール名だけが含まれます。 これは、ユーザーのディレクトリ構造のプライバシーを保護する場合に便利なオプションです。|
|Y|ダンプファイルに AVX register 情報を追加します。|

 

### <a name="span-idadditional_informationspanspan-idadditional_informationspanspan-idadditional_informationspanadditional-information"></a><span id="Additional_Information"></span><span id="additional_information"></span><span id="ADDITIONAL_INFORMATION"></span>追加情報

カーネルモードのダンプファイルとその使用方法の説明については、「[カーネルモードダンプファイル](kernel-mode-dump-files.md)」を参照してください。 ユーザーモードのダンプファイルとその使用方法の説明については、「[ユーザーモードのダンプファイル](user-mode-dump-files.md)」を参照してください。

## <a name="remarks"></a>注釈
-------

このコマンドは、さまざまな状況で使用できます。

-   このコマンドは、ユーザーモードのライブデバッグ中に、ダンプファイルを生成するように対象アプリケーションに指示しますが、ターゲットアプリケーションは終了しません。

-   このコマンドは、カーネルモードのデバッグ中にダンプファイルを生成するように対象のコンピュータに指示しますが、ターゲットコンピュータはクラッシュしません。

-   クラッシュダンプのデバッグ中に、このコマンドを実行すると、古いものから新しいクラッシュダンプファイルが作成されます。 これは、大きなクラッシュダンプファイルがあり、より小さいファイルを作成する場合に便利です。

生成されるダンプファイルの種類を制御できます。

- カーネルモードで、[完全なメモリダンプ](complete-memory-dump.md)を生成するには、 **/f**オプションを使用します。 [小さいメモリダンプ](small-memory-dump.md)を生成するには、 **/m**オプションを使用します (オプションもありません)。 .Dump コマンドで[カーネルメモリダンプ](kernel-memory-dump.md)を生成することはできません。

- ユーザーモードでは、 **. dump** **/m \[ **<em>minioptions</em> **\]** が最適な選択肢です。 "M" は "ミニダンプ" を表していますが、この*Minioption*を使用して作成されたダンプファイルのサイズは、非常に小さいから非常に大きくなる場合があります。 適切な*Minioptions*を指定することによって、含まれる情報を正確に制御できます。 たとえば、 **. dump/ma**を使用すると、ダンプに大量の情報が生成されます。 以前のコマンドである**dump/f**では、適度に大きい "標準ダンプ" ファイルが生成され、カスタマイズすることはできません。

ダンプするプロセスを指定することはできません。 実行中のすべてのプロセスがダンプされます。

**/Xc**、 **/xr**、/ **xp**、および **/xt**オプションは、例外とコンテキスト情報をダンプファイルに格納するために使用されます。 これにより、このダンプファイルで[**ecxr (例外コンテキストレコードの表示)**](-ecxr--display-exception-context-record-.md)コマンドを実行できます。

次の例では、フルメモリとハンドル情報を含むユーザーモードミニダンプを作成します。

```dbgcmd
0:000> .dump /mfh myfile.dmp 
```

ハンドル情報は、 [**! handle**](-handle.md) extension コマンドを使用して読み取ることができます。

 

 





