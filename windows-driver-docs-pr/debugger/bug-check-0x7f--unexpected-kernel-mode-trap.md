---
title: バグチェック 0x7F UNEXPECTED_KERNEL_MODE_TRAP
description: UNEXPECTED_KERNEL_MODE_TRAP のバグチェックの値が0x0000007F になっています。
ms.assetid: f4fcc2a1-891b-44e9-94bf-e712019f538f
keywords:
- バグチェック 0x7F UNEXPECTED_KERNEL_MODE_TRAP
- UNEXPECTED_KERNEL_MODE_TRAP
ms.date: 05/23/2017
topic_type:
- apiref
api_name:
- UNEXPECTED_KERNEL_MODE_TRAP
api_type:
- NA
ms.localizationpriority: medium
ms.openlocfilehash: 2c292b5976fc9d2866c731c5286a5fdc9de360ed
ms.sourcegitcommit: dadc9ced1670d667e31eb0cb58d6a622f0f09c46
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/09/2020
ms.locfileid: "84534805"
---
# <a name="bug-check-0x7f-unexpected_kernel_mode_trap"></a>バグチェック 0x7F: 予期しない \_ カーネル \_ モード \_ トラップです


予期しない \_ カーネル \_ モード \_ トラップのバグチェックには、値0x0000007f が指定されています。 このバグチェックは、Intel CPU がトラップを生成し、カーネルがこのトラップをキャッチできなかったことを示します。

このトラップは、バインドされた*トラップ*(カーネルがキャッチすることを許可されていないトラップ)、または*二重フォールト*(以前の障害の処理中に発生したエラーであり、常にシステム障害になる可能性があります) にすることができます。

> [!IMPORTANT]
> このトピックはプログラマーを対象としています。 コンピューターの使用中にブルースクリーンのエラーコードが表示された顧客の場合は、「[ブルースクリーンエラーのトラブルシューティング](https://www.windows.com/stopcode)」を参照してください。


## <a name="unexpected_kernel_mode_trap-parameters"></a>予期しない \_ カーネル \_ モード \_ トラップパラメーター


青い画面に表示される最初のパラメーターは、トラップ番号を指定します。

最も一般的なトラップコードは次のとおりです。

-   0x00000000 または0除算エラーは、DIV 命令が実行され、除数が0であることを示します。 このエラーは、メモリの破損、他のハードウェアの問題、またはソフトウェアの障害によって発生する可能性があります。

-   0x00000004 (Overflow) は、オーバーフロー (OF) フラグが設定されている場合にプロセッサが割り込みハンドラーの呼び出しを実行すると発生します。

-   0x00000005 または境界チェックのエラーは、プロセッサが、バインドされた命令の実行中に、オペランドが指定された制限を超えていることを検出したことを示します。 バインドされた命令は、符号付き配列インデックスが特定の範囲内にあることを保証します。

-   0x00000006、または無効なオペコードは、プロセッサが無効な命令を実行しようとしていることを示します。 このエラーは、通常、命令ポインターが破損し、間違った場所を指している場合に発生します。 このエラーの最も一般的な原因は、ハードウェアメモリの破損です。

-   0x00000008 または Double Fault は、前の例外のハンドラーへの呼び出し中に例外が発生したことを示します。 通常、2つの例外は順次処理されます。 ただし、直列に処理できない例外がいくつかあります。この場合、プロセッサは2つのエラーを通知します。 ダブルエラーには、次の2つの一般的な原因があります。
    -   カーネルスタックがオーバーフローしています。 このオーバーフローは、ガードページにヒットし、カーネルがトラップフレームをプッシュしようとしたときに発生します。 スタックは残されていないため、スタックオーバーフローが発生し、ダブルフォールトが発生します。 この概要が発生したと思われる場合は、 [**! thread**](-thread.md)を使用してスタックの制限を決定し、 [**Kb (スタックバックトレース)**](k--kb--kc--kd--kp--kp--kv--display-stack-backtrace-.md)を大きなパラメーター ( **kb 100**など) と共に使用して、完全なスタックを表示します。
    -   ハードウェアの問題。

あまり一般的でないトラップコードには、次のものがあります。

-   0x00000001--システムデバッガー呼び出し

-   0x00000003--デバッガーのブレークポイント

-   0x00000007--コプロセッサのないハードウェアコプロセッサ命令

-   0x0000000A--破損したタスクの状態セグメント

-   0x0000000B--存在しないメモリセグメントへのアクセス

-   0x0000000C--スタックの制限を超えたメモリへのアクセス

-   0x0000000D--他の例外の対象になっていない例外アプリケーションのアクセス違反に関連する保護エラー

その他のトラップ番号については、Intel アーキテクチャのマニュアルを参照してください。

<a name="cause"></a>原因
-----

バグチェック0x7F は、通常、故障または不一致のハードウェア (特にメモリ) をインストールした後、またはインストールされているハードウェアに障害が発生した場合に発生します。

カーネルスタックがオーバーフローしたときに、二重障害が発生する可能性があります。 このオーバーフローは、複数のドライバーが同じスタックにアタッチされている場合に発生します。 たとえば、2つのファイルシステムフィルタードライバーが同じスタックにアタッチされていて、ファイルシステムが繰り返しに戻ると、スタックがオーバーフローします。

<a name="resolution"></a>解像度
----------

**デバッグ:** 常に、 [**! analyze**](-analyze.md)拡張で開始します。

この拡張機能では不十分な場合は、 [**kv (スタックバックトレースの表示)**](k--kb--kc--kd--kp--kp--kv--display-stack-backtrace-.md)デバッガーコマンドを使用します。

-   **Kv**に**taskgate**が表示されている場合は、コロンの前の部分で[**. tss (タスク状態セグメントの表示)**](-tss--display-task-state-segment-.md)コマンドを使用します。

-   **Kv**がトラップフレームを表示する場合は、[[**トラップ (トラップフレームの表示)**](-trap--display-trap-frame-.md) ] コマンドを使用してフレームの書式を設定します。

-   それ以外の場合は、適切なフレームに対して、 [**. trap ([トラップフレームの表示)**](-trap--display-trap-frame-.md) ] コマンドを使用します。 (X86 ベースのプラットフォームでは、このフレームはプロシージャ NT に関連付けられています **。KiTrap**)

これらのコマンドのいずれかを使用したら、もう一度**kv**を使用して新しいスタックを表示します。

**トラブルシューティング:** 最近コンピューターにハードウェアを追加した場合は、それを削除して、エラーが引き続き発生するかどうかを確認します。 既存のハードウェアに障害が発生した場合は、問題のあるコンポーネントを削除または交換します。 システム製造元によって提供されるハードウェア診断を実行して、どのハードウェアコンポーネントに障害が発生したかを判断します。

メモリスキャナーは特に重要です。 メモリが不足しているか一致していないと、このバグチェックが発生します。 これらの手順の詳細については、自分のコンピューターの所有者のマニュアルを参照してください。 コンピューターのすべてのアダプターカードが適切に装着されていることを確認します。 アダプターカードの連絡先がクリーンであることを確認するために、インク消しゴムまたは電気連絡物の取り扱いを使用します。

新しくインストールされたシステムにエラーが表示される場合は、BIOS、SCSI コントローラー、またはネットワークカードの更新プログラムが利用可能かどうかを確認します。 通常、この種の更新プログラムは、ハードウェアの製造元の Web サイトまたは BBS で入手できます。

すべてのハードディスクドライブ、ハードディスクコントローラー、および SCSI アダプターが、インストールされている Windows のバージョンと互換性があることを確認します。

新しいまたは更新されたデバイスドライバのインストール後にエラーが発生した場合は、ドライバを削除または交換する必要があります。 この状況下で、起動シーケンス中にエラーが発生し、システムパーティションが NTFS でフォーマットされている場合は、セーフモードを使用して、問題のあるドライバーの名前変更や削除を行うことができます。 ドライバーがシステムスタートアッププロセスの一部としてセーフモードで使用されている場合は、ファイルにアクセスするために回復コンソールを使用してコンピューターを起動する必要があります。

また、コンピューターを再起動し、オペレーティングシステムの選択肢が表示されている文字ベースのメニューで F8 キーを押します。 **[詳細オプション**] メニューで、[**前回正常起動時の構成**] オプションを選択します。 このオプションは、一度に1つのドライバーまたはサービスだけを追加する場合に最も効果的です。

オーバークロック (評価された仕様を上回る速度で CPU を実行するように設定すると、このエラーが発生する可能性があります)。 エラーが発生しているコンピューターをオーバークロックした場合は、CPU を既定のクロック速度設定に戻します。

エラーの原因となっているデバイスまたはドライバーの特定に役立つ可能性のある追加のエラーメッセージについては、イベントビューアーのシステムログを確認してください。 また、BIOS のメモリキャッシュを無効にして、問題を解決することもできます。

新しいバージョンの Windows オペレーティングシステムへのアップグレード中にこのエラーが発生した場合は、デバイスドライバ、システムサービス、ウイルス検索プログラム、または新しいバージョンと互換性のないバックアップツールが原因で発生している可能性があります。 可能であれば、すべてのサードパーティのデバイスドライバーとシステムサービスを削除し、すべてのウイルススキャナーを無効にしてから、をアップグレードしてください。 これらのツールの更新プログラムを入手するには、ソフトウェアの製造元にお問い合わせください。 また、最新の Windows Service Pack がインストールされていることを確認します。

最後に、上記のすべての手順でエラーが解決しない場合は、システムマザーボードを診断テスト用の修復機能にします。 このエラーは、亀裂、傷のトレース、またはマザーボード上の欠陥のあるコンポーネントによって発生することもあります。

 

 




