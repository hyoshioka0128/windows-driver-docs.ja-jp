---
title: 2 つのファイアウォール
description: 2 つのファイアウォール
ms.assetid: e6192cf8-02a4-4dbe-8ed7-a64f8efc24f6
keywords:
- リモートデバッグ、2つのファイアウォール
- ファイアウォールとリモートデバッグ
ms.date: 06/08/2020
ms.localizationpriority: medium
ms.openlocfilehash: 1ccea4cb1e0c0a7bed2b2d287dd7656a0878b834
ms.sourcegitcommit: 8097a09d2f989a9b3dca250c4e2ffd4cec2172e3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/09/2020
ms.locfileid: "84563158"
---
# <a name="two-firewalls"></a>2 つのファイアウォール

このシナリオでは、を構築するコンピューターでカーネルデバッグを実行する必要があります。技術者は C のビルドにあり、そこにシンボルへのアクセス権があります。 ただし、両方の建物には、着信接続を許可しないファイアウォールがあります。

ニュートラルサイトでリピータを設定する必要があります。たとえば、B を作成します。その後、外側のを B に接続し、C を外側に B に接続することができます。

このシナリオには、次の4つのコンピューターが関係します。

- の構築にあるターゲットコンピューター。

- の構築にあるローカルホストコンピューター。このコンピューターは、KD 接続サーバーを実行します。 デバッグケーブルまたは1394ケーブルでターゲットコンピューターに接続され、リピータに接続されます。 このコンピューターの IP アドレスを127.0.10.10 にします。

- ビルド B のコンピューター。これにより、リピータが実行されます。 その IP アドレスを127.0.20.20 にします。

- 技術者が配置されている C を構築しているコンピューター。 このコンピューターでは、WinDbg をスマートクライアントとして実行します。 その IP アドレスを127.0.30.30 にします。

まず、ターゲットコンピューターがデバッグ用に構成されていて、ローカルホストコンピューターに接続されていることを確認します。 この例では、1394ケーブルが使用されています。

次に、127.0.20.20 で repeater を開始します。

```console
dbengprx -p -s tcp:port=9001 -c tcp:port=9000,clicon=127.0.10.10
```

3番目に、次のようにを構築して、127.0.10.10 上の KD 接続サーバーを開始します。

```console
kdsrv -t tcp:port=9000,clicon=127.0.20.20,password=longjump
```

最後に、C のビルドで127.0.30.30 のスマートクライアントを起動します (これは、の構築時にサーバーを起動する前または後に実行できます)。

```console
windbg -k kdsrv:server=@{tcp:server=127.0.20.20,port=9001,password=longjump},trans=@{1394:channel=9} -y SymbolPath
```

## <a name="five-computer-scenario"></a>5台のコンピューターのシナリオ

このようなシナリオは、C の1台のコンピューターにシンボルがあるものの、技術者が別のコンピューターにあると仮定すると、さらに複雑になります。

127.0.30.30 のシンボルが前と同じで、そのローカル名が boxc であるとし \\ \\ ます。 スマートクライアントは、上記と同じコマンドを使用して起動できますが、追加**のサーバー**パラメーターを使用することもできます。 このコンピューターを使用しているユーザーがいないため、WinDbg ではなく KD を使用すると、処理時間が短縮されます。

```console
kd -server npipe:pipe=randomname -k kdsrv:server=@{tcp:server=127.0.20.20,port=9001,password=longjump},trans=@{1394:channel=9} -y SymbolPath
```

その後、建物内の他の場所にある技術者は、次のようにデバッグクライアントを開始できます。

```console
windbg -remote npipe:server=\\BOXC,pipe=randomname
```

チェーン内の \\ 最後のデバッガーではなく、チェーン内の最初の非リピータ (boxc のスマートクライアント) によってパスワードが指定されている必要があることに注意してください \\ 。
