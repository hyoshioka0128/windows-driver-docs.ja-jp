---
title: ファイルに格納されたセクションとページ ファイルに格納されたセクション
description: ファイルに格納されたセクションとページ ファイルに格納されたセクション
ms.assetid: 5967678a-cbc3-4db0-86d8-14ffc79f610e
keywords:
- ファイルベースのセクション WDK カーネル
- ページファイルに基づくセクション WDK カーネル
- サポートされているメモリセクション WDK カーネル
- ページファイルバックアップ (WDK カーネル)
- 一時的に共有するデータ WDK カーネル
- 永続的に共有するデータ WDK カーネル
- メモリセクション WDK カーネル
- セクションオブジェクト WDK カーネル
ms.date: 06/16/2017
ms.localizationpriority: medium
ms.openlocfilehash: f8db1cb2d525080ebc281176a90cc6afa2e44f7b
ms.sourcegitcommit: e468c608b144bcbf4e6f8d171844689dac38a67c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/01/2020
ms.locfileid: "87508067"
---
# <a name="file-backed-and-page-file-backed-sections"></a>ファイルに格納されたセクションとページ ファイルに格納されたセクション





すべてのメモリセクションは、共有するデータを一時的または永続的に格納できるディスクファイルによってサポート ("バックアップ") されます。

セクションを作成するときに、セクションのバックアップ先となる特定のデータファイルを指定できます。 このようなセクションは *、ファイルによってサポート*されるセクションと呼ばれます。

バッキングファイルを識別しない場合、セクションはシステムのページングファイルによってサポートされ、セクションは*ページファイルでサポート*されるセクションと呼ばれます。 ファイルを使用したセクション内のデータは、ディスクに完全に書き込むことができます。 ページファイルで構成されたセクションのデータは、完全にディスクに書き込まれることはありません。

*ファイルベース*のセクションには、ディスク上の実際のファイルの内容が反映されます。つまり、これはメモリマップトファイルです。 特定のファイルを使用したセクション内のメモリ位置へのアクセスは、関連付けられたファイル内の場所へのアクセスに対応します。

プロセスがビューを読み取り専用としてマップする場合、ビューから読み取られたデータは、ファイルから透過的に読み込まれます。 同様に、プロセスによってビューが読み取り/書き込み可能としてマップされる場合、ビューから読み取られるデータまたはビューに書き込まれたデータは、ファイルに対して透過的に読み取りまたは書き込みが行われます。 どちらの場合も、ビューの仮想メモリはページファイル内の領域を使用しません。

ファイルを使用したセクションは、コピー時書き込みとしてマップすることもできます。 その場合、ビューのデータはファイルから読み取られますが、ビューに書き込まれたデータはファイルに書き込まれません。代わりに、最後のビューがマップ解除され、セクションへの最後のハンドルが閉じられた後に破棄されます。

ページファイルでサポートされるセクションは、ディスク上の明示的なファイルではなく、ページファイルによってバックアップされます。 ページファイルを利用したセクションに加えられた変更は、セクションオブジェクトが破棄された後、自動的に破棄されます。 ページファイルで構成されるセクションは、2つのプロセス間の共有メモリセグメントとして使用できます。

ファイルベースまたは非対応のセクションは、2つのプロセス間で共有できます。 同じ物理メモリアドレス範囲は、各プロセス内の仮想メモリアドレス範囲にマップされます (ただし、必ずしも同じ仮想アドレスには対応しません)。

 

 




